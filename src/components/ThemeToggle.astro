---
---
<div class="theme-dropdown-wrap">
  <label for="theme-select" class="sr-only">Theme</label>
  <select id="theme-select" class="theme-dropdown" aria-label="Theme">
    <option value="latte">‚òÄÔ∏è Light</option>
    <option value="mocha">üåô Dark</option>
  </select>
</div>

<script type="module">

  const select = document.getElementById('theme-select');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;


  function setTheme(name) {
    if (name === 'mocha') document.documentElement.setAttribute('data-theme', 'mocha');
    else document.documentElement.removeAttribute('data-theme');
    try { localStorage.setItem('theme', name); } catch (e) {}
  }

  // Initialize theme from localStorage or system preference
  const saved = (() => { try { return localStorage.getItem('theme'); } catch(e) { return null; } })();

  if (saved) setTheme(saved);
  else setTheme(prefersDark ? 'mocha' : 'latte');


  select.addEventListener('change', (e) => {
    setTheme(select.value);
  });

  // Set dropdown to current theme
  function setDropdown(theme) {
    if (!select) return;
    select.value = theme === 'mocha' ? 'mocha' : 'latte';
  }

  // Update dropdown on load
  setDropdown(saved ? saved : (prefersDark ? 'mocha' : 'latte'));
</script>

<style>
  .theme-dropdown-wrap {
    display: flex;
    align-items: center;
    gap: .5rem;
  }
  .theme-dropdown {
    background: rgb(var(--gray-light));
    color: rgb(var(--black));
    border: 1px solid rgba(var(--gray), 0.18);
    border-radius: 4px;
    font-size: 0.95em;
    padding: 0.15em 0.5em;
    min-width: 84px;
  }
  .theme-dropdown:focus {
    border-color: var(--accent);
    outline: none;
  }
</style>
