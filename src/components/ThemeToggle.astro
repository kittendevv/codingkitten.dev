---
---
<button id="theme-toggle" aria-label="Toggle theme" class="theme-toggle">
  <span class="sr-only">Toggle theme</span>
  <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42M12 7a5 5 0 100 10 5 5 0 000-10z"/></svg>
</button>

<script type="module">
  const toggle = document.getElementById('theme-toggle');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  function setTheme(name) {
    if (name === 'mocha') document.documentElement.setAttribute('data-theme', 'mocha');
    else document.documentElement.removeAttribute('data-theme');
    try { localStorage.setItem('theme', name); } catch (e) {}
  }

  // Initialize theme from localStorage or system preference
  const saved = (() => { try { return localStorage.getItem('theme'); } catch(e) { return null; } })();
  if (saved) setTheme(saved);
  else setTheme(prefersDark ? 'mocha' : 'latte');

  toggle.addEventListener('click', () => {
    const current = document.documentElement.getAttribute('data-theme') === 'mocha' ? 'mocha' : 'latte';
    const next = current === 'mocha' ? 'latte' : 'mocha';
    setTheme(next);
  });
</script>

<style>
  .theme-toggle {
    background: transparent;
    border: 1px solid rgba(var(--gray), 0.12);
    padding: .25rem .5rem;
    border-radius: 8px;
    color: rgb(var(--black));
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    cursor: pointer;
  }
  .theme-toggle:hover { transform: translateY(-2px); }
  @media (prefers-reduced-motion: reduce) { .theme-toggle { transition: none; } }
</style>
